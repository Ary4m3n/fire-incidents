---
title: "An Analysis of a Rising Trend in Dollar Loss in Fire Incidents With and Without Sprinkler Systems in Toronto over a decade (2011-2022)"
author: 
  - Aryaman Sharma
thanks: "Code and data are available at: https://github.com/Ary4m3n/fire-incidents.git"
date: today
date-format: long
abstract: "A Fire Incidents dataset was used to assess the general trend in dollar loss in fire incidents and also assess the impact of existence of sprinkler systems installed across the city of Toronto. Based on the analysis, a general rise over the years in the dollar loss in fire incidents as well as a massive amount of loss to property was found wherever sprinkler systems were not installed. This paper suggests that an installation of sprinkler systems will help reduce the impact of fire incidents on loss to property in Toronto."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
library(gridExtra)
```


# Introduction
The Great Fire of Toronto in 1904 caused mass destruction. The fire demolished around 20 acres of the industrial area in the city of Toronto, demolishing at least 98 buildings, causing a dollar loss of $10 million and leaving numerous thousands unemployed [@greatFire]. Since then we have seen an improvement in city codes and policies, better civil planning and extensive training of firefighters [@fireMedium]. Till date, the Toronto Fire Services report approximately 10,000 fires each year which is of immense concern to the city of Toronto and its residents [@fireData].

The Fire Incidents data of Toronto includes incident reports of fire incidents as defined by the Ontario Fire Marshal from 2011-2022 [@openData]. This paper delves deeper into the trend of estimated dollar loss in fire incidents in the city of Toronto from 2011-2022 and also analyses the impact of an installation of sprinkler systems on the dollar loss. The aim of the paper is to analyse the impact of better planning, specifically an installation of sprinkler systems, on the extent of loss faced by the residents of Toronto. 

In this paper, Fire Incidents data [@openData] was used to first explore if there is a trend in the estimated dollar loss over the years, and then was used to find any correlation between better civil planning, i.e. the installation of sprinkler systems and a lesser loss of property. It was found that there is a general rising trend in the dollar loss between 2011 and 2022. The paper also found that the dollar loss was drastically higher for fire incidents where there was no sprinkler system installed. This leads us to make an important judgement that better civil planning helps reduce the impact of such unfortunate events.

This paper is structured using the following sections: Data, Results and Discussion In the Data (@sec-data) section, the data source of the dataset from Open Data Toronto [@openData] is discussed and the data cleaning process is outlined. In the Results (@sec-results) section, the paper summarizes the data findings and relevant graphs of the trends observed. The paper ends with the Discussion (@sec-discussion) section, where the findings of the paper have been analysed and delved deeper into, and a further scope for the paper has been discussed.

# Data {#sec-data}

The data analysed in this paper was from Open Data Toronto [@openData]. The data was cleaned and analysed using the open source `R` programming language [@citeR]. R libraries and packages such as `opendatatoronto` [@openDataToronto], `tidyverse` [@citeTidyverse], `janitor` [@citeJanitor], `ggplot2` [@citeGgplot], `knitr` [@citeKnitr], `readr` [@citeReadr], `gridExtra` [@citeGridExtra] and `dplyr` [@citeDplyr]. In the following sections, we will discuss the raw data (@sec-data-raw) and then move on to discussing the data cleaning process (@sec-data-clean). 

## Raw Fire Incidents Data {#sec-data-raw}

The raw data for this paper was obtained from Open Data Toronto [@openData] and we specifically looked at the Fire Incidents Data provided by the Ontario Fire Marshal from 2011-2022. We also looked at another data set related to this topic, Fire Services Incident Data [@openDataOther] but that data set firstly was last refreshed in 2019 and had been retired and replaced with the data set we used. 

The raw data had loads of information (that was mainly unnecessary to us for this paper), which mainly included the area of origin, casualities, persons rescued, estimated dollar loss, fire incident type, fire timing, intersection (location), cause, sprinkler system presence etc. For this paper specifically, to observe and analyse the trend in dollar loss and the effect of better civil planning (i.e. existence of sprinkler systems), we did not require such a plethora of variables. The raw data set contains 2,357,639 data entries and 43 variables. Due to the size of the dataset, we could not include a table outlining the structure of the dataset. 

In the next section (@sec-data-clean), we will outline the data-cleaning process and also show the first few rows of the cleaned data.


## Cleaning Fire Incidents Data {#sec-data-clean}

As stated above in (@sec-data-raw), we cleaned the data to cater to our needs of analyzing the trend in dollar loss and the effects of better civil planning. Specifically, we only kept 3 variables, the estimated dollar loss, the year in which the incident took place and sprinkler system presence which outlines whether a sprinkler system had been installed in the place where the incident took place. @tbl-cleaned shows the structure of the cleaned data by presenting the first 6 datapoints or rows. 

Here, in order to obtain this cleaned data table, I got the year of the incident from the `alarm_time` variable in the raw data and cleaned the sprinkler system presence column to only show 4 unique statuses, "No sprinkler system", "Full sprinkler system present", "Undetermined" and "NA" as shown clearly in @tbl-cleaned using `R` [@citeR]. @tbl-cleaned shows the head of the cleaned data.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

cleaned_fire_data <- read_csv("../data/cleaned_data.csv", show_col_types = FALSE)
```
```{r}
#| echo: false
#| eval: true
#| label: tbl-cleaned
#| tbl-cap: "Cleaned Data showing Dollar loss over 2011-2022 with indication of Sprinkler System"
#| tbl-cap-location: bottom
#| warning: false

library(knitr)

kable(head(cleaned_fire_data))
# I read on how to add a table using knitr from ChatGPT 4, its referenced to in usage.txt.
```

Now that we have cleaned our raw fire incidents data and have generated a clean table. We will go on to the Results section (@sec-results) and look at the trend generated for the dollar loss over the years, 2011-2022 (@sec-results-year), and then look at the effect of the presence of sprinkler systems on the property or dollar loss (@sec-results-sprinkler).

# Results {#sec-results}

## Trend in Dollar Loss over 2011-2022 in Fire Incidents {#sec-results-year}

@tbl-trend shows the table of the total estimated dollar loss over the years 2011-2022 in the city of Toronto in fire incidents. The table presents three columns: year, dollar loss and dollar loss in millions. The years range from 2011-2022, and the subsequent columns present the total estimated loss of property (dollar loss) in that specific year. For plotting simplicity, we introduced the dollar loss in millions variable here because it makes the plot (@fig-dollar-loss) more coherent and easy for interpretation.
```{r}
#| echo: false
#| eval: true
#| label: tbl-trend
#| tbl-cap: "Total Estimated Dollar Loss per year (2011-2022)"
#| tbl-cap-location: bottom
#| warning: false
#| message: false

cleaned_fire_data_trend <- cleaned_fire_data |>
  group_by(Year) |>
  summarise(`Dollar Loss` = sum(`Dollar Loss`))

cleaned_fire_data_trend$`Dollar Loss in Millions` <- cleaned_fire_data_trend$`Dollar Loss` / 1000000
cleaned_fire_data_trend$Year <- as.numeric(cleaned_fire_data_trend$Year)

kable(cleaned_fire_data_trend)
```

@fig-dollar-loss shows the bar plot of the @tbl-trend where the Dollar Loss in millions is plotted against the years 2011-2022.
```{r}
#| label: fig-dollar-loss
#| fig-cap: Year vs Dollar Loss ($million) in Fire Incidents in Toronto (2011-2022)
#| echo: false

ggplot(cleaned_fire_data_trend, aes(x = `Year`, y = `Dollar Loss in Millions`)) +
  geom_col(alpha = 1.5, fill = "darkorange") +
  theme_minimal() +
  scale_x_continuous(breaks = 2011:2022) + 
  labs(x = "Year", y = "Dollar Loss in Millions")
```

We can clearly observe an increasing trend in the dollar loss in fire incidents in the city of Toronto over the years in @fig-dollar-loss. The plot starts from showing a dollar loss of approximately `$`50 million in 2011, and about `$`40 million in 2012. The plot peaks in 2019 where it reports an estimate dollar loss of about `$`120 million. The plot them shows a dollar loss of approximately `$`85 million in 2021, and about `$`90 million in 2022, indicating a general rising trend over the decade. We will delve deeper into the implications and impact of this trend over the years in the Discussion Section (@sec-discussion).

## Effect of presence of Sprinkler Systems on Dollar Loss {#sec-results-sprinkler}

@tbl-full shows the table of Dollar Loss over the years in the presence of proper sprinkler systems. As shown in @tbl-trend, the table presents three columns: year, dollar loss and dollar loss in millions, where the dollar loss in millions has been used to plot the bar graph in @fig-dollar-loss-both.
```{r}
#| echo: false
#| eval: true
#| label: tbl-full
#| tbl-cap: "Total Estimated Dollar Loss over 2011-2022 with Full Sprinkler System Present"
#| warning: false
#| message: false

cleaned_fire_data_full <- cleaned_fire_data |>
  filter(`Sprinkler System Presence`=="Full sprinkler system present") |>
  group_by(Year) |>
  summarise(`Dollar Loss` = sum(`Dollar Loss`))

cleaned_fire_data_full$`Dollar Loss in Millions` <- cleaned_fire_data_full$`Dollar Loss` / 1000000
cleaned_fire_data_full$Year <- as.numeric(cleaned_fire_data_full$Year)
# I read more on the usage of as.numeric from ChatGPT 4, its referenced to in usage.txt.

kable(cleaned_fire_data_full)

```

@tbl-none shows the table of Dollar Loss over the years when there were no sprinkler systems present and has the same columns as @tbl-full. This table, i.e. @tbl-none and @tbl-full have been used to plot @fig-dollar-loss-both
```{r}
#| echo: false
#| eval: true
#| label: tbl-none
#| tbl-cap: "Total Estimated Dollar Loss over 2011-2022 with No Sprinkler System Present"
#| warning: false
#| message: false

cleaned_fire_data_none <- cleaned_fire_data |>
  filter(`Sprinkler System Presence`=="No sprinkler system") |>
  group_by(Year) |>
  summarise(`Dollar Loss` = sum(`Dollar Loss`))

cleaned_fire_data_none$`Dollar Loss in Millions` <- cleaned_fire_data_none$`Dollar Loss` / 1000000
cleaned_fire_data_none$Year <- as.numeric(cleaned_fire_data_none$Year)

kable(cleaned_fire_data_none)
```

@fig-dollar-loss-both, on the left (in red), shows the dollar loss each year in fire incidents where **full sprinkler system** was present, and on the right shows the dollar loss each year in fire incidents where **no sprinkler system** was present. Just by looking at the plots, we observe that there is a significant difference between there being full sprinkler system installed and there being no spinkler system installed. This along with the implications of such civil planning with further be delved deeper into in the Discussion Section (@sec-discussion).

```{r}
#| label: fig-dollar-loss-both
#| fig-cap: Year vs Dollar Loss ($million) in Fire Incidents in Toronto (2011-2022)`:` With (red) and Without (blue) Sprinkler Systems
#| echo: false

y_limits <- c(0, 100)
plot1 <- ggplot(cleaned_fire_data_full, aes(x = `Year`, y = `Dollar Loss in Millions`)) + 
  geom_col(alpha = 1.5, fill = "red") + 
  ylim(y_limits) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) + 
  scale_x_continuous(breaks = 2011:2022) +
  labs(title = "Full Sprinkler System")
plot2 <- ggplot(cleaned_fire_data_none, aes(x = `Year`, y = `Dollar Loss in Millions`)) + 
  geom_col(alpha = 1.5, fill = "blue") + 
  ylim(y_limits) + 
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_x_continuous(breaks = 2011:2022) +
  labs(title = "No Sprinkler System")
# I read on how to add two plots next to each other for comparison from ChatGPT 4, its referenced to in usage.txt.
grid.arrange(plot1, plot2, ncol=2)
```

# Discussion {#sec-discussion}

## Trend in Dollar Loss over 2011-2022 in Fire Incidents {#sec-disc-first-point}

As seen in @fig-dollar-loss and communicated in @sec-results-year, we observe a general rising trend over the years from 2011-2022 in the dollar loss or property loss in Fire Incidents in Toronto. The data tends to skew more towards the latter years where as reported in @sec-results-year, there was a dollar loss of approximately `$`90 million in 2022 versus `$`50 million in 2011. As a general trend it is very evident to the reader that there is a general increase over the years.

Let us now delve deeper into the possible reasons of such a trend. Firstly, i believe that as the population increases over the years there are more chances of there being fire incidents. As the city of Toronto gets more densely populated there is a higher chance or probability of there being a fire incident than when it was less densely populated. Secondly, the city of Toronto has evolved over the years by constructing skyscrapers, apartments, offices etc. for the residents to live and work in. As the number buildings in general increase around us, there will consequently be more chances of there being fire incidents than before. Finally, we can not ignore that with an improvement in infrastructure of the city, i.e. building better roadway systems or highways, there has been an influx of residents of surrounding areas to come to Toronto to work. This can also lead to there being more fire incidents such as unfortunate car or vehicle fires. 

All together, there may be numerous reasons to such a rise in the trend over the years, but the three stated above give a good idea of what those reasons might revolve around.

## Effect of presence of Sprinkler Systems on Dollar Loss {#sec-disc-second-point}

As seen in @fig-dollar-loss-both and communicated in @sec-results-sprinkler, we observe a clear difference in the dollar loss over the years in the case of there being a presence of full sprinkler system and there being no sprinkler system. We see that while in the case of full sprinkler system being present the dollar loss is at max around `$`15 million, on the other hand in the case of no sprinkler system present the dollar loss reaches a maximum of around `$`95 million too. Generally, we see that the dollar loss amounts when there is no sprinkler system present are significantly higher than when there is one present.

When we delve deeper into the possible reasons of such a trend, we find a few prominent and obvious ones. Remarkably, such a major difference is observed because of the obvious reason that if there is a sprinkler system present, it will help extinguish the fire before the first responders or fire fighters come to scene and take the measures to cease the fire. This will consequently save the infrastructure from experiencing severe damages and hence reduce the general dollar loss or property loss caused in that specific incident. On the other hand, in the case that there is no sprinkler system present, we will have to wait for the fire fighters to arrive on the scene of the incident and then act, by when the fire could have already caused major damages to the infrastructure.

@fig-dollar-loss-both also speaks to the importance of such essential civil planning that might prevent major structural damages or property losses from happening. 

## Weaknesses and Further Scope {#sec-disc-weaknesses}

While working on the paper we came across a few weaknesses that could be built on to make the report even more coherent. Firstly, we observed that in the case of the figures presented in @tbl-full and @tbl-none and the plot in @fig-dollar-loss-both, there might have been lesser data points for the case of full sprinkler system present that maybe caused the figures for the dollar loss to be generally lesser than for the case of no sprinkler system. 

Additionally, the variable of presence of sprinkler system also included **NA** and **Undetermined** statuses which were not accounted for in this report. These two fields would include incidents such as vehicle fires, where the criterion of there being a sprinkler system is not applicable as they can not exist in vehicles in general. In this report, as we are generally looking at the impact of better civil planning we chose to ignore the aforementioned statuses. 

As a further scope, an extension to this report could include taking into account the NA and Undetermined statuses as well when analyzing the data. Then, we can look more into the response times of the first responders and analyse the impact of good training in reducing property damage or dollar loss. Another extension could also be looking at intersections where majority of the fire incidents have taken place and analyse how to better plan the neighborhood in a way as to reduce property loss in the future. All of these extensions can be easily made using the same raw data set as used in this paper.

In conclusion, we have observed a general rising trend in the dollar loss over the years in fire incidents in the city of Toronto and have also observed that with better civil planning, specifically installing sprinkler systems, we can prevent from major property damage from taking place.

# References


